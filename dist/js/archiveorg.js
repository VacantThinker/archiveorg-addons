function saveTextToFile(e,t){let n=document.createElement("a");n.href=`data:text/plain;charset=utf-8,${encodeURIComponent(e)}`,n.download=`${t}`,n.click()}browser.runtime.onMessage.addListener((e=>{console.log("meslog message=\n",e);let{filename:t}=e,n=document.querySelector(".directory-listing-table > tbody:nth-child(2)").querySelectorAll("tr"),r=Array.from(n).filter((e=>{let t=e.querySelector("td:nth-child(3)").textContent;if(t.length>0&&!t.endsWith("-"))return!0})).map((e=>{let t=e.querySelector("td:nth-child(1) > a").href;return String(t)})),l=r.reduce(((e,t)=>{let n=t.lastIndexOf("."),r=t.substring(n);return e[r]=r,e}),{});saveTextToFile(Object.keys(l).reduce(((e,t)=>{let n=0,l=r.reduce(((e,r,l,c)=>r.endsWith(t)?(n+=1,n%30==0?e.concat(r,"\n\n"):e.concat(r,"\n")):e),"");return e.concat(l,"\n\n\n\n")}),""),t)}));